<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>五十二中神人合集</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      /* DAY 主题变量 */
      --bg: #ffffff;
      --bg-soft: #f9fafb;
      --text-main: #111827;
      --text-muted: #6b7280;
      --accent: #d9a441;      /* 校徽橙 */
      --accent-strong: #d92525; /* 校徽红 */
      --border-soft: #e5e7eb;
      --card-bg: #ffffff;
      --card-border: #e5e7eb;
      --card-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
    }

    body.night {
      --bg: #020617;
      --bg-soft: #020617;
      --text-main: #38bdf8;   /* 夜晚主文字蓝色 */
      --text-muted: #9ca3af;
      --accent: #38bdf8;
      --accent-strong: #0ea5e9;
      --border-soft: #111827;
      --card-bg: #020617;
      --card-border: #1f2937;
      --card-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
      background: var(--bg);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden; /* 加载期间锁滚动 */
      transition: background 0.6s ease;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .page {
      flex: 1;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 1;
    }

    /* 背景动态层（日） */
    .bg-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }

    .orbit {
      position: absolute;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, rgba(217, 164, 65, 0.26), transparent 55%);
      opacity: 0.5;
      filter: blur(12px);
      animation: orbitMove 22s ease-in-out infinite alternate;
    }

    .orbit.orbit-1 {
      width: 260px;
      height: 260px;
      top: -80px;
      left: 10%;
    }

    .orbit.orbit-2 {
      width: 320px;
      height: 320px;
      bottom: -120px;
      right: 5%;
      animation-delay: 4s;
    }

    .orbit.orbit-3 {
      width: 210px;
      height: 210px;
      top: 40%;
      left: 55%;
      animation-delay: 9s;
    }

    @keyframes orbitMove {
      0% { transform: translate3d(0,0,0) scale(1); }
      50% { transform: translate3d(10px, -16px, 0) scale(1.04); }
      100% { transform: translate3d(-16px, 18px, 0) scale(1.02); }
    }

    /* 夜晚星空层 */
    .star-field {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    body.night .star-field {
      opacity: 1;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      border-radius: 999px;
      background: #e5f3ff;
      opacity: 0.2;
      animation: starPulse 4s ease-in-out infinite;
    }

    .star.s1 { top: 12%; left: 18%; animation-delay: 0.2s; }
    .star.s2 { top: 24%; left: 64%; animation-delay: 1.1s; }
    .star.s3 { top: 40%; left: 30%; animation-delay: 2s; }
    .star.s4 { top: 58%; left: 78%; animation-delay: 0.9s; }
    .star.s5 { top: 72%; left: 12%; animation-delay: 1.7s; }
    .star.s6 { top: 84%; left: 48%; animation-delay: 2.4s; }

    @keyframes starPulse {
      0%, 100% { opacity: 0.12; transform: scale(1); }
      50% { opacity: 0.35; transform: scale(1.4); }
    }

    body.night .orbit {
      opacity: 0;
    }

    /* 加载页 */
    .preloader {
      position: fixed;
      inset: 0;
      background: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 999;
      transition: opacity 0.6s ease;
    }

    .preloader.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-text-wrap {
      position: relative;
      margin-bottom: 24px;
      padding: 10px 24px;
    }

    .loading-text-box {
      position: relative;
      padding: 10px 24px;
      border-radius: 999px;
      border: 1px solid rgba(217, 164, 65, 0.5);
      background: #ffffff;
      overflow: hidden;
    }

    .loading-text-box span {
      font-size: 15px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      white-space: nowrap;
      color: #111827;
    }

    .loading-glow {
      position: absolute;
      inset: -3px;
      border-radius: 999px;
      background:
        conic-gradient(
          from 0deg,
          rgba(217, 164, 65, 0) 0deg,
          rgba(217, 164, 65, 0.1) 80deg,
          rgba(217, 164, 65, 0.7) 130deg,
          rgba(217, 37, 37, 0.7) 180deg,
          rgba(217, 164, 65, 0.08) 260deg,
          rgba(217, 164, 65, 0) 360deg
        );
      filter: blur(4px);
      mix-blend-mode: screen;
      animation: glowSpin 2.6s linear infinite;
      pointer-events: none;
    }

    @keyframes glowSpin {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-bar-wrap {
      width: min(360px, 80vw);
      text-align: center;
    }

    .progress-track {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: #f3f4f6;
      overflow: hidden;
      border: 1px solid #e5e7eb;
      margin-bottom: 8px;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, #fbbf24, #f59e0b);
      transform-origin: left;
      transition: width 0.05s linear;
    }

    .progress-text {
      font-size: 12px;
      color: #6b7280;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .progress-percent {
      margin-left: 6px;
      color: #d92525;
      font-variant-numeric: tabular-nums;
    }

    /* 主内容 */

    .main {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.7s ease;
      min-height: 0;
      flex: 1;
    }

    .main.active {
      opacity: 1;
      pointer-events: auto;
    }

    .main-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 56px 20px 32px;
      position: relative;
    }

    /* 右上角模式切换 */

    .mode-toggle {
      position: absolute;
      right: 20px;
      top: 24px;
      z-index: 10;
    }

    .mode-button {
      position: relative;
      width: 42px;
      height: 42px;
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: rgba(255, 255, 255, 0.92);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      overflow: hidden;
      box-shadow:
        0 8px 18px rgba(15, 23, 42, 0.06),
        0 0 0 0.5px rgba(148, 163, 184, 0.45);
      transition:
        transform 0.18s ease-out,
        box-shadow 0.18s ease-out,
        background 0.4s ease;
    }

    body.night .mode-button {
      background: rgba(15, 23, 42, 0.9);
      box-shadow:
        0 10px 24px rgba(15, 23, 42, 0.8),
        0 0 0 0.5px rgba(30, 64, 175, 0.7);
    }

    .mode-button:active {
      transform: scale(0.96);
    }

    .mode-liquid {
      position: absolute;
      inset: -10%;
      background: #d92525;
      transform: translateY(-110%);
      border-radius: 40px;
      filter: blur(0.5px);
      transition: transform 0.45s cubic-bezier(0.21, 0.8, 0.32, 1);
    }

    .mode-button.liquid-on .mode-liquid {
      transform: translateY(0%);
    }

    body.night .mode-liquid {
      background: #0ea5e9;
    }

    .mode-icon {
      position: relative;
      width: 22px;
      height: 22px;
      z-index: 1;
    }

    /* 太阳 / 月亮图标 */

    .sun-core,
    .sun-ray {
      position: absolute;
      inset: 0;
      margin: auto;
      border-radius: 999px;
      background: #ffffff;
    }

    .sun-core {
      width: 12px;
      height: 12px;
    }

    .sun-ray {
      width: 18px;
      height: 18px;
      box-shadow:
        0 -10px 0 0 #ffffff,
        0 10px 0 0 #ffffff,
        10px 0 0 0 #ffffff,
        -10px 0 0 0 #ffffff,
        7px 7px 0 0 #ffffff,
        -7px -7px 0 0 #ffffff,
        7px -7px 0 0 #ffffff,
        -7px 7px 0 0 #ffffff;
      border-radius: 0;
      background: transparent;
    }

    .moon-wrap {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .moon-main {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: #ffffff;
      box-shadow: -4px 0 0 0 rgba(15, 23, 42, 1);
      transform: translateX(2px);
    }

    .icon-sun { opacity: 1; transition: opacity 0.25s ease; }
    .icon-moon { opacity: 0; transition: opacity 0.25s ease; }

    body.night .icon-sun { opacity: 0; }
    body.night .icon-moon { opacity: 1; }

    /* 标题 */

    .title-block {
      text-align: center;
      margin-bottom: 32px;
    }

    .title-main {
      font-size: clamp(28px, 4.2vw, 40px);
      font-weight: 700;
      letter-spacing: 0.25em;
      text-indent: 0.25em;
      text-transform: uppercase;
      color: var(--text-main);
      margin-bottom: 10px;
      opacity: 0;
      transform: translateY(14px);
      animation: fadeUp 0.8s ease forwards;
      animation-delay: 0.15s;
    }

    .title-divider {
      width: 72px;
      height: 2px;
      background: var(--accent);
      margin: 0 auto;
      border-radius: 999px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeUp 0.7s ease forwards;
      animation-delay: 0.35s;
    }

    header.main-header-extras {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-bottom: 32px;
      opacity: 0;
      transform: translateY(16px);
      animation: fadeUp 0.8s ease forwards;
      animation-delay: 0.8s;
    }

    .header-tags {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      font-size: 11px;
      color: var(--text-muted);
    }

    .tag-pill {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      transition: border-color 0.3s ease, background 0.3s ease, color 0.3s ease;
    }

    body.night .tag-pill {
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-muted);
    }

    .content {
      opacity: 0;
      transform: translateY(26px);
      animation: fadeUp 0.9s ease forwards;
      animation-delay: 1s;
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(24px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* 简洁卡片 */

    .hero-card {
      position: relative;
      border-radius: 18px;
      padding: 20px 18px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      box-shadow: var(--card-shadow);
      overflow: hidden;
      transform-origin: center;
      transition:
        transform 0.22s ease-out,
        box-shadow 0.22s ease-out,
        border-color 0.22s ease-out,
        background 0.22s ease-out;
    }

    .hero-card.hall-link {
      cursor: pointer;
    }

    .hero-card:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.16);
      border-color: var(--accent);
    }

    body.night .hero-card:hover {
      border-color: var(--accent-strong);
    }

    .hero-card-title {
      font-size: 18px;
      margin-bottom: 8px;
      color: var(--text-main);
      display: flex;
      align-items: baseline;
      gap: 8px;
    }

    .hero-card-title span.badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(217, 164, 65, 0.7);
      color: var(--accent);
      background: #fffbeb;
    }

    body.night .hero-card-title span.badge {
      border-color: rgba(56, 189, 248, 0.7);
      color: var(--accent);
      background: rgba(15, 23, 42, 0.9);
    }

    .hero-card-text {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.7;
      margin-bottom: 12px;
    }

    .hero-card-cta {
      font-size: 13px;
      color: var(--accent-strong);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .hero-card-cta::after {
      content: "›";
      font-size: 14px;
      transform: translateY(0.5px);
    }

    /* 通用隐藏类 */
    .is-hidden {
      display: none !important;
    }

    /* 班级列表：只在“神人档案大厅”里出现，用 transition 避免抽搐 */
    .class-grid {
      margin-top: 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;

      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.35s ease-out, transform 0.35s ease-out;
    }

    /* 进入大厅时加上这个类，触发一次平滑出现 */
    .class-grid-enter {
      opacity: 1;
      transform: translateY(0);
    }

    .class-card {
      transform: none;
      animation: none;
    }

    .class-card-title {
      font-size: 16px;
      margin-bottom: 6px;
      color: var(--text-main);
    }

    .class-card-sub {
      font-size: 13px;
      color: var(--text-muted);
    }

    .class-card.clickable {
      cursor: pointer;
    }

    .class-card.clickable .class-card-title {
      color: var(--accent-strong);
    }

    /* 返回按钮（在大厅、班级页面用） */

    .back-btn {
      margin: 18px 0 0;
      padding: 6px 14px 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(255, 255, 255, 0.95);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 13px;
      color: var(--text-main);
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06);
      transform-origin: center;
      transition:
        transform 0.18s cubic-bezier(0.22, 0.61, 0.36, 1),
        box-shadow 0.22s ease,
        background 0.25s ease,
        border-color 0.25s ease;
    }

    .back-btn .back-chevron {
      font-size: 16px;
      transform: translateY(-0.5px);
    }

    .back-btn:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.12);
    }

    .back-btn:active {
      transform: translateY(0) scale(0.97);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.1);
    }

    body.night .back-btn {
      background: rgba(15, 23, 42, 0.92);
      border-color: rgba(51, 65, 85, 0.9);
      color: var(--text-main);
      box-shadow:
        0 10px 24px rgba(15, 23, 42, 0.9),
        0 0 0 0.5px rgba(30, 64, 175, 0.8);
    }

    /* 高二（2）班页面 */

    .class2-view {
      margin-top: 16px;
    }

    .legend-card {
      margin-top: 12px;
      cursor: pointer;
    }

    .legend-main {
      display: flex;
      gap: 14px;
      align-items: flex-start;
    }

    .legend-photo {
      width: 76px;
      height: 76px;
      border-radius: 16px;
      overflow: hidden;
      background: #e5e7eb;
      flex-shrink: 0;
    }

    .legend-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .legend-text-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .legend-text-desc {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .legend-sub {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-muted);
    }

    /* === 刘子淇档案详情页 === */

    .legend-detail {
      margin-top: 16px;
      opacity: 0;
      transform: translateY(16px);
      transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    }

    .legend-detail-show {
      opacity: 1;
      transform: translateY(0);
    }

    .detail-section {
      margin-top: 14px;
    }

    .detail-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    /* 图片布局 & 悬停效果 */

    .detail-images {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 12px;
    }

    /* 缩略图：两列排列，大小固定，不会乱重叠 */
    .detail-images img {
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
      flex: 1 1 calc(50% - 6px);
      max-width: calc(50% - 6px);
      max-height: 260px;
      width: 100%;
      height: auto;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }

    /* 悬停轻微上浮 + 放大 */
    .detail-images img:hover {
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.28);
    }

    /* 小屏幕：一列显示，避免太挤 */
    @media (max-width: 640px) {
      .detail-images img {
        flex-basis: 100%;
        max-width: 100%;
      }
    }

    /* 让档案里的卡片保持稳，不再整体放大挤到上下内容 */
    .legend-detail .hero-card {
      transform: none;
    }

    .legend-detail .hero-card:hover {
      transform: none;
      box-shadow: var(--card-shadow);
      border-color: var(--card-border);
    }

    .detail-text {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.65;
    }

    .detail-note {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* 密码弹窗 */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 40;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }

    .modal-backdrop.active {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-sheet {
      width: min(360px, 90vw);
      border-radius: 18px;
      background: var(--card-bg);
      border: 1px solid var(--border-soft);
      box-shadow: 0 22px 50px rgba(15, 23, 42, 0.35);
      padding: 18px 18px 12px;
      transform: translateY(16px) scale(0.96);
      opacity: 0;
      transition:
        transform 0.25s cubic-bezier(0.22, 0.61, 0.36, 1),
        opacity 0.25s ease;
    }

    .modal-backdrop.active .modal-sheet {
      transform: translateY(0) scale(1);
      opacity: 1;
    }

    .modal-title {
      font-size: 17px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .modal-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .modal-field {
      margin-bottom: 4px;
    }

    .modal-field input {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      padding: 8px 10px;
      font-size: 15px;
      background: var(--bg-soft);
      color: var(--text-main);
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .modal-field input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(217, 164, 65, 0.35);
    }

    .modal-error {
      min-height: 18px;
      font-size: 12px;
      color: #dc2626;
      margin-bottom: 8px;
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    .modal-btn {
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 14px;
      border: none;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
    }

    .modal-btn-secondary {
      background: transparent;
      color: var(--accent-strong);
    }

    .modal-btn-secondary:hover {
      background: rgba(148, 163, 184, 0.12);
    }

    .modal-btn-primary {
      background: var(--accent-strong);
      color: #ffffff;
      box-shadow: 0 8px 18px rgba(217, 37, 37, 0.35);
    }

    .modal-btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(217, 37, 37, 0.5);
    }

    .modal-btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 7px 16px rgba(217, 37, 37, 0.4);
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-3px); }
      100% { transform: translateX(0); }
    }

    .modal-sheet.shake {
      animation: shake 0.22s ease;
    }

    footer {
      margin-top: auto;
      padding: 18px 20px 24px;
      font-size: 11px;
      text-align: center;
      color: var(--text-muted);
      opacity: 0;
      transform: translateY(14px);
      animation: fadeUp 0.8s ease forwards;
      animation-delay: 1.2s;
      z-index: 1;
    }

    footer span {
      color: var(--accent);
    }

    @media (max-width: 640px) {
      .main-inner {
        padding-top: 64px;
      }
      header.main-header-extras {
        flex-direction: column;
      }
      .hero-card {
        padding: 18px 16px;
      }
    }

    /* === 图片全屏查看器 === */

    .image-viewer-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }

    .image-viewer-backdrop.active {
      opacity: 1;
      pointer-events: auto;
    }

    .image-viewer {
      max-width: min(96vw, 920px);
      max-height: 82vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .image-viewer img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 16px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.65);
      object-fit: contain;
      background: #000;
    }

    .viewer-close,
    .viewer-prev,
    .viewer-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: rgba(15, 23, 42, 0.72);
      color: #e5e7eb;
      border-radius: 999px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      transition: background 0.2s ease, transform 0.1s ease;
    }

    .viewer-prev { left: 10px; }
    .viewer-next { right: 10px; }

    .viewer-close {
      top: 12%;
      right: 16px;
      transform: none;
    }

    .viewer-close:hover,
    .viewer-prev:hover,
    .viewer-next:hover {
      background: rgba(15, 23, 42, 0.95);
    }

    .viewer-counter {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: #e5e7eb;
      opacity: 0.8;
    }
  </style>
</head>

<body class="day">
  <!-- 背景动态层 -->
  <div class="bg-layer">
    <div class="orbit orbit-1"></div>
    <div class="orbit orbit-2"></div>
    <div class="orbit orbit-3"></div>

    <div class="star-field">
      <span class="star s1"></span>
      <span class="star s2"></span>
      <span class="star s3"></span>
      <span class="star s4"></span>
      <span class="star s5"></span>
      <span class="star s6"></span>
    </div>
  </div>

  <!-- 加载页 -->
  <div class="preloader" id="preloader">
    <div class="loading-text-wrap">
      <div class="loading-glow"></div>
      <div class="loading-text-box">
        <span>五十二中神人加载中……</span>
      </div>
    </div>

    <div class="loading-bar-wrap">
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text">
        LOADING
        <span class="progress-percent" id="progressPercent">0%</span>
      </div>
    </div>
  </div>

  <!-- 页面主体 -->
  <div class="page">
    <main class="main" id="main">
      <div class="main-inner">
        <!-- 主题切换按钮 -->
        <div class="mode-toggle">
          <button class="mode-button" id="modeButton" aria-label="切换日夜模式">
            <div class="mode-liquid"></div>
            <div class="mode-icon">
              <div class="icon-sun">
                <div class="sun-ray"></div>
                <div class="sun-core"></div>
              </div>
              <div class="icon-moon">
                <div class="moon-wrap">
                  <div class="moon-main"></div>
                </div>
              </div>
            </div>
          </button>
        </div>

        <!-- 标题 -->
        <div class="title-block">
          <div class="title-main">五十二中神人合集</div>
          <div class="title-divider"></div>
        </div>

        <!-- 标签 -->
        <header class="main-header-extras">
          <div class="header-tags">
            <span class="tag-pill">FIFTY-TWO MIDDLE SCHOOL</span>
            <span class="tag-pill">LEGEND ARCHIVE</span>
          </div>
        </header>

        <!-- 内容区域 -->
        <section class="content">
          <!-- 首页唯一入口：神人档案大厅 -->
          <section class="hero-card hall-link" id="hallCard">
            <div class="hero-card-inner">
              <h2 class="hero-card-title">
                神人档案大厅
                <span class="badge">总入口</span>
              </h2>
              <p class="hero-card-text">
                点击进入“高二年级神人档案”查看各班神人内容。
              </p>
              <div class="hero-card-cta">进入高二年级</div>
            </div>
          </section>

          <!-- 大厅左上角返回首页 -->
          <button class="back-btn is-hidden" id="backButton" type="button">
            <span class="back-chevron">‹</span>
            <span>返回首页</span>
          </button>

          <!-- 高二（1）～（6）班：只在“神人档案大厅”里出现，初始隐藏 -->
          <div class="class-grid is-hidden" id="classHall">
            <!-- 高二（1）班 -->
            <section class="hero-card class-card" data-class="1">
              <div class="hero-card-inner">
                <div class="class-card-title">高二（1）班</div>
                <div class="class-card-sub">神人档案建设中…</div>
              </div>
            </section>

            <!-- 高二（2）班，可点击 -->
            <section class="hero-card class-card clickable" data-class="2">
              <div class="hero-card-inner">
                <div class="class-card-title">高二（2）班</div>
                <div class="class-card-sub">点击进入高二（2）班神人专属页面（需要访问密码）。</div>
              </div>
            </section>

            <!-- 高二（3）班，可点击 -->
            <section class="hero-card class-card clickable" data-class="3">
              <div class="hero-card-inner">
                <div class="class-card-title">高二（3）班</div>
                <div class="class-card-sub">点击进入高二（3）班神人专属页面（预留入口）。</div>
              </div>
            </section>

            <!-- 高二（4）班 -->
            <section class="hero-card class-card" data-class="4">
              <div class="hero-card-inner">
                <div class="class-card-title">高二（4）班</div>
                <div class="class-card-sub">神人档案建设中…</div>
              </div>
            </section>

            <!-- 高二（5）班 -->
            <section class="hero-card class-card" data-class="5">
              <div class="hero-card-inner">
                <div class="class-card-title">高二（5）班</div>
                <div class="class-card-sub">神人档案建设中…</div>
              </div>
            </section>

            <!-- 高二（6）班 -->
            <section class="hero-card class-card" data-class="6">
              <div class="hero-card-inner">
                <div class="class-card-title">高二（6）班</div>
                <div class="class-card-sub">神人档案建设中…</div>
              </div>
            </section>
          </div>

          <!-- 高二（2）班页面 -->
          <div class="class2-view is-hidden" id="class2View">
            <!-- 刘子淇档案详情页（点击卡片后出现） -->
            <div class="legend-detail is-hidden" id="legendDetail1">
              <!-- 返回到高二（2）班总览 -->
              <button class="back-btn" id="legendBack1" type="button">
                <span class="back-chevron">‹</span>
                <span>返回刘子淇总卡片</span>
              </button>

              <!-- 组 1：前两张长图 -->
              <section class="hero-card detail-section">
                <h3 class="detail-title">团伙作案记录</h3>
                <div class="detail-images">
                  <img src="tieba1.jpg" alt="档案图 1" />
                  <img src="tieba2.jpg" alt="档案图 2" />
                </div>
                <p class="detail-text">
                  （这里写第一组图片的简介或背景说明，你可以在本地自行修改。）
                </p>
              </section>

              <!-- 组 2：中间图 -->
              <section class="hero-card detail-section">
                <h3 class="detail-title">承认了自己父亲台北神盾局家事</h3>
                <div class="detail-images">
                  <img src="shendunju.jpg" alt="档案图 3" />
                </div>
                <p class="detail-text">
                  （这里写第二组图片的说明。）
                </p>
              </section>

              <!-- 组 3：聊天截图 -->
              <section class="hero-card detail-section">
                <h3 class="detail-title">瓜条</h3>
                <div class="detail-images">
                  <img src="gua1.jpg" alt="档案图 4" />
                </div>
                <p class="detail-text">
                  （这里写第三组图片的说明。）
                </p>
              </section>

              <!-- 预留更多组 -->
              <section class="hero-card detail-section">
                <h3 class="detail-title">和crush的神秘聊天记录</h3>
                <div class="detail-images">
                  <img src="h1.jpg" alt="档案预留图片 1" />
                  <img src="h2.jpg" alt="档案预留图片 2" />
                  <img src="h3.jpg" alt="档案预留图片 3" />
                  <img src="h4.jpg" alt="档案预留图片 4" />
                  <img src="h5.jpg" alt="档案预留图片 5" />
                  <img src="h6.jpg" alt="档案预留图片 6" />
                  <img src="h7.jpg" alt="档案预留图片 7" />
                  <img src="h8.jpg" alt="档案预留图片 8" />
                  <img src="h9.jpg" alt="档案预留图片 9" />
                </div>
                <p class="detail-text">
                  （这里写这一组的总结，或以后补充的说明文字。）
                </p>
                <p class="detail-note">
                  提示：如果还有第五组、第六组，就复制这一整个 section 改标题和图片文件名即可。
                </p>
              </section>
            </div>

            <!-- 返回高二年级 -->
            <button class="back-btn" id="class2Back" type="button">
              <span class="back-chevron">‹</span>
              <span>返回高二年级</span>
            </button>

            <!-- 高二（2）班总卡片 -->
            <section class="hero-card legend-card" id="legendCard1">
              <div class="legend-main">
                <div class="legend-photo">
                  <!-- 把图片放到同一目录并命名为 liu-ziqi.jpg -->
                  <img src="liu-ziqi.jpg" alt="台湾传奇千金大小姐刘子淇" />
                </div>
                <div class="legend-text">
                  <div class="legend-text-title">台湾传奇千金大小姐刘子淇</div>
                  <div class="legend-text-desc">
                    高二（2）班设定的“神人角色”档案卡。点击此卡可以进入详细档案页面，查看分组图片和更多说明。
                  </div>
                </div>
              </div>
              <p class="legend-sub">
                （这里可以写一句简介或语录，你可以在本地自由替换成自己的文案。）
              </p>
            </section>
          </div>
        </section>
      </div>
    </main>

    <!-- 最底部的小字 -->
    <footer>
      五十二中 · <span>神人合集</span> · 内部纪念站
    </footer>
  </div>

  <!-- 高二（2）班 访问密码弹窗 -->
  <div class="modal-backdrop" id="passwordModal" aria-hidden="true">
    <div class="modal-sheet" id="passwordSheet">
      <div class="modal-title">进入高二（2）班</div>
      <div class="modal-subtitle">请输入访问密码</div>
      <div class="modal-field">
        <input
          id="passwordInput"
          type="password"
          inputmode="numeric"
          autocomplete="off"
          placeholder="输入访问密码"
        />
      </div>
      <div class="modal-error" id="passwordError"></div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-secondary" id="passwordCancel">取消</button>
        <button class="modal-btn modal-btn-primary" id="passwordOk">确认</button>
      </div>
    </div>
  </div>

  <!-- 全屏图片查看器（点击档案图片时出现） -->
  <div class="image-viewer-backdrop" id="imageViewer">
    <div class="image-viewer">
      <button class="viewer-close" id="viewerClose" aria-label="关闭">×</button>
      <button class="viewer-prev" id="viewerPrev" aria-label="上一张">‹</button>
      <img src="" alt="" id="viewerImage" />
      <button class="viewer-next" id="viewerNext" aria-label="下一张">›</button>
      <div class="viewer-counter" id="viewerCounter">1 / 1</div>
    </div>
  </div>

  <script>
    // 5 秒加载动画
    const TOTAL_DURATION = 5000;
    const INTERVAL = 50;
    const steps = TOTAL_DURATION / INTERVAL;
    const increment = 100 / steps;

    const progressFill = document.getElementById("progressFill");
    const progressPercent = document.getElementById("progressPercent");
    const preloader = document.getElementById("preloader");
    const main = document.getElementById("main");

    let current = 0;
    const timer = setInterval(() => {
      current += increment;
      if (current > 100) current = 100;

      progressFill.style.width = current + "%";
      progressPercent.textContent = Math.round(current) + "%";

      if (current >= 100) {
        clearInterval(timer);
        setTimeout(() => {
          preloader.classList.add("hidden");
          main.classList.add("active");
          document.body.style.overflow = "auto";
        }, 150);
      }
    }, INTERVAL);

    // 日 / 夜模式切换 + 液态图标覆盖动画
    const modeButton = document.getElementById("modeButton");
    const body = document.body;

    let isNight = false;
    let liquidTimeout = null;

    modeButton.addEventListener("click", () => {
      modeButton.classList.remove("liquid-on");
      void modeButton.offsetWidth;      // 触发重绘，重置动画
      modeButton.classList.add("liquid-on");

      if (liquidTimeout) clearTimeout(liquidTimeout);
      liquidTimeout = setTimeout(() => {
        modeButton.classList.remove("liquid-on");
      }, 480);

      isNight = !isNight;
      if (isNight) {
        body.classList.add("night");
        body.classList.remove("day");
      } else {
        body.classList.add("day");
        body.classList.remove("night");
      }
    });

    // 大厅 & 首页切换
    const hallCard   = document.getElementById("hallCard");
    const classHall  = document.getElementById("classHall");
    const backButton = document.getElementById("backButton");

    hallCard.addEventListener("click", () => {
      hallCard.classList.add("is-hidden");
      classHall.classList.remove("is-hidden");
      classHall.classList.remove("class-grid-enter");
      backButton.classList.remove("is-hidden");

      // 下一帧触发淡入动画
      requestAnimationFrame(() => {
        classHall.classList.add("class-grid-enter");
      });
    });

    backButton.addEventListener("click", () => {
      // 反向淡出
      classHall.classList.remove("class-grid-enter");
      setTimeout(() => {
        classHall.classList.add("is-hidden");
      }, 350);

      hallCard.classList.remove("is-hidden");
      backButton.classList.add("is-hidden");
    });

    // 高二（2）/（3）班点击
    const class2Card = document.querySelector('.class-card.clickable[data-class="2"]');
    const class3Card = document.querySelector('.class-card.clickable[data-class="3"]');

    // 高二（2）班：先弹密码框
    const passwordModal  = document.getElementById("passwordModal");
    const passwordSheet  = document.getElementById("passwordSheet");
    const passwordInput  = document.getElementById("passwordInput");
    const passwordError  = document.getElementById("passwordError");
    const passwordCancel = document.getElementById("passwordCancel");
    const passwordOk     = document.getElementById("passwordOk");
    const CORRECT_PASSWORD = "114514278";

    function openPasswordModal() {
      passwordModal.classList.add("active");
      passwordError.textContent = "";
      passwordError.style.color = "#dc2626";
      passwordInput.value = "";
      setTimeout(() => passwordInput.focus(), 60);
    }

    function closePasswordModal() {
      passwordModal.classList.remove("active");
    }

    function handlePasswordSubmit() {
      if (passwordInput.value === CORRECT_PASSWORD) {
        passwordError.style.color = "#16a34a";
        passwordError.textContent = "密码正确，正在进入高二（2）班…";
        setTimeout(() => {
          closePasswordModal();
          enterClass2View();
        }, 400);
      } else {
        passwordError.style.color = "#dc2626";
        passwordError.textContent = "密码错误，请重试";
        passwordSheet.classList.remove("shake");
        void passwordSheet.offsetWidth; // 重新触发动画
        passwordSheet.classList.add("shake");
      }
    }

    if (class2Card) {
      class2Card.addEventListener("click", () => {
        openPasswordModal();
      });
    }

    if (class3Card) {
      class3Card.addEventListener("click", () => {
        alert("这里预留为高二（3）班神人专属页面入口，可以后续单独设计。");
      });
    }

    passwordCancel.addEventListener("click", () => {
      closePasswordModal();
    });

    passwordOk.addEventListener("click", handlePasswordSubmit);

    passwordInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        handlePasswordSubmit();
      }
    });

    passwordModal.addEventListener("click", (e) => {
      if (e.target === passwordModal) {
        closePasswordModal();
      }
    });

    // 高二（2）班页面切换 & 刘子淇总卡片 → 详情页

    const class2View = document.getElementById("class2View");
    const class2Back = document.getElementById("class2Back");
    const legendCard1 = document.getElementById("legendCard1");

    const legendDetail1 = document.getElementById("legendDetail1");
    const legendBack1   = document.getElementById("legendBack1");

    // 每次进入高二（2）班时重置状态：只显示总卡片，隐藏档案详情
    function resetClass2View() {
      legendDetail1.classList.add("is-hidden");
      legendDetail1.classList.remove("legend-detail-show");
      legendCard1.classList.remove("is-hidden");
      class2Back.classList.remove("is-hidden");
    }

    // 正确密码后进入高二（2）班
    function enterClass2View() {
      classHall.classList.add("is-hidden");
      class2View.classList.remove("is-hidden");
      backButton.classList.remove("is-hidden");
      resetClass2View();
    }

    // 从高二（2）班返回“神人档案大厅”
    class2Back.addEventListener("click", () => {
      class2View.classList.add("is-hidden");
      classHall.classList.remove("is-hidden");
      classHall.classList.remove("class-grid-enter");
      requestAnimationFrame(() => {
        classHall.classList.add("class-grid-enter");
      });
      backButton.classList.remove("is-hidden");
    });

    // 点击总卡片 → 进入档案详情
    legendCard1.addEventListener("click", () => {
      legendCard1.classList.add("is-hidden");
      class2Back.classList.add("is-hidden");

      legendDetail1.classList.remove("is-hidden");
      legendDetail1.classList.remove("legend-detail-show");

      requestAnimationFrame(() => {
        legendDetail1.classList.add("legend-detail-show");
      });
    });

    // 从档案详情返回总卡片
    legendBack1.addEventListener("click", () => {
      legendDetail1.classList.remove("legend-detail-show");

      setTimeout(() => {
        legendDetail1.classList.add("is-hidden");
        legendCard1.classList.remove("is-hidden");
        class2Back.classList.remove("is-hidden");
      }, 300);
    });

    // === 档案图片全屏查看器：点击缩略图 → 全屏预览 + 左右翻阅 ===
    (function () {
      const galleryRoot = document.getElementById("legendDetail1");
      if (!galleryRoot) return;

      const viewerBackdrop = document.getElementById("imageViewer");
      const viewerImage    = document.getElementById("viewerImage");
      const viewerClose    = document.getElementById("viewerClose");
      const viewerPrev     = document.getElementById("viewerPrev");
      const viewerNext     = document.getElementById("viewerNext");
      const viewerCounter  = document.getElementById("viewerCounter");

      if (!viewerBackdrop || !viewerImage) return;

      const thumbs = Array.from(
        galleryRoot.querySelectorAll(".detail-images img")
      );

      if (!thumbs.length) return;

      let currentIndex = 0;

      function updateViewer() {
        const img = thumbs[currentIndex];
        if (!img) return;
        viewerImage.src = img.getAttribute("src");
        viewerImage.alt = img.getAttribute("alt") || "";
        viewerCounter.textContent = (currentIndex + 1) + " / " + thumbs.length;
      }

      function openViewer(index) {
        currentIndex = index;
        updateViewer();
        viewerBackdrop.classList.add("active");
      }

      function closeViewer() {
        viewerBackdrop.classList.remove("active");
      }

      function showNext(delta) {
        currentIndex = (currentIndex + delta + thumbs.length) % thumbs.length;
        updateViewer();
      }

      // 每张缩略图绑定点击事件
      thumbs.forEach((img, index) => {
        img.style.cursor = "pointer";
        img.addEventListener("click", () => openViewer(index));
      });

      // 按钮事件
      viewerClose.addEventListener("click", closeViewer);
      viewerPrev.addEventListener("click", () => showNext(-1));
      viewerNext.addEventListener("click", () => showNext(1));

      // 点击背景关闭
      viewerBackdrop.addEventListener("click", (e) => {
        if (e.target === viewerBackdrop) {
          closeViewer();
        }
      });

      // 键盘左右 / ESC
      document.addEventListener("keydown", (e) => {
        if (!viewerBackdrop.classList.contains("active")) return;
        if (e.key === "Escape") closeViewer();
        if (e.key === "ArrowRight") showNext(1);
        if (e.key === "ArrowLeft") showNext(-1);
      });
    })();
  </script>
</body>
</html>
